# Runtime per HDD Control Chart - ApexCharts Card
# Shows runtime/HDD with statistical control bounds (mean ± 2σ)
# Dashboard: Energy Performance - Operations, Diagnostics
type: custom:apexcharts-card
header:
  show: true
  title: Runtime per HDD (7-Day Rolling)
  show_states: true
  colorize_states: true
graph_span: 14d
span:
  end: day
yaxis:
  - id: primary
    min: 0
    apex_config:
      tickAmount: 5
      title:
        text: min/HDD
apex_config:
  chart:
    height: 280
  legend:
    show: true
    position: bottom
  stroke:
    curve: smooth
  tooltip:
    shared: true
series:
  - entity: sensor.hvac_runtime_per_hdd_upper_bound_1s
    name: Upper (+2σ)
    color: "#ff6b6b"
    stroke_width: 1
    opacity: 0.7
    yaxis_id: primary
    extend_to: now
    show:
      legend_value: false
    group_by:
      func: last
      duration: 1d
  - entity: sensor.hvac_runtime_per_hdd_lower_bound_1s
    name: Lower (-2σ)
    color: "#4ecdc4"
    stroke_width: 1
    opacity: 0.7
    yaxis_id: primary
    extend_to: now
    show:
      legend_value: false
    group_by:
      func: last
      duration: 1d
  - entity: sensor.hvac_runtime_per_hdd_7_day
    name: Runtime/HDD
    color: "#3498db"
    stroke_width: 3
    yaxis_id: primary
    extend_to: now
    show:
      in_header: true
    group_by:
      func: last
      duration: 1d
  - entity: sensor.hvac_runtime_per_hdd_7_day_mean
    name: 7-Day Mean
    color: "#f39c12"
    stroke_width: 2
    opacity: 0.8
    yaxis_id: primary
    extend_to: now
    show:
      legend_value: false
    group_by:
      func: last
      duration: 1d
